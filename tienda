Pos Tienda Python
· python
    def resumen_ventas(self, ventas: List[Venta]) -> Tuple[int, float, float, float]:


def registrar_venta_cli(pos: POS):
    print("\nRegistrar venta (deja código vacío para terminar)")
    items_info: List[Tuple[str, int, float]] = []
    descuentos: List[float] = []
    while True:
        codigo = input("Código: ").strip()
        if not codigo:
            break
        if codigo not in pos.productos:
            print("Código no encontrado en inventario")
            continue
        cantidad = int(input("Cantidad: ").strip())
        precio_unit = float(input("Precio unit (0=usar precio del producto): ").strip() or 0)
        desc = float(input("Desc % por línea (0 si no aplica): ").strip() or 0)
        items_info.append((codigo, cantidad, precio_unit))
        descuentos.append(desc)

    if not items_info:
        print("No se añadieron ítems.")
        pausar()
        return


    desc_global = float(input("Descuento global % (0 si no aplica): ").strip() or 0)
    metodo_pago = input("Método de pago (Efectivo/Tarjeta/Transferencia): ").strip() or "Efectivo"


    # Pre-calcular total para pedir pago
    # Usamos una venta temporal sin afectar stock
    items_tmp = []
    for idx, (codigo, cantidad, precio_unit) in enumerate(items_info):
        p = pos.productos[codigo]
        precio = p.precio if precio_unit <= 0 else precio_unit
        desc = descuentos[idx] if idx < len(descuentos) else 0.0
        items_tmp.append(ItemVenta(codigo, p.nombre, cantidad, precio, p.impuesto, desc))
    venta_tmp = Venta(id=0, fecha=datetime.now().strftime(DATETIME_FMT), items=items_tmp, descuento_global=desc_global)
    total_estimado = venta_tmp.total()
    print(f"Total estimado: {total_estimado:.2f} {CURRENCY}")
    pago_recibido = float(input("Pago recibido: ").strip() or 0)


    venta = pos.nueva_venta(items_info, descuentos, desc_global, pago_recibido, metodo_pago)
    print("\nVenta registrada con éxito!\n")
    print(pos.formatear_recibo(venta))
    print(f"\nRecibo guardado en ./{RECIBOS_DIR}/recibo_{venta.id:06d}.txt")
    pausar()




def reporte_hoy_cli(pos: POS):
    ventas = pos.ventas_del_dia()
    n, sub, imp, tot = pos.resumen_ventas(ventas)
    print(f"\nVentas de hoy ({date.today().strftime(DATE_FMT)}): {n}")
    print(f"Subtotal: {sub:.2f}  Impuestos: {imp:.2f}  TOTAL: {tot:.2f} {CURRENCY}")
    pausar()




def reporte_rango_cli(pos: POS):
    desde = input("Desde (YYYY-MM-DD): ").strip()
    hasta = input("Hasta (YYYY-MM-DD): ").strip()
    ventas = pos.ventas_por_rango(desde, hasta)
    n, sub, imp, tot = pos.resumen_ventas(ventas)
    print(f"\nVentas del {desde} al {hasta}: {n}")
    print

ChatGPT puede cometer errores. Considera verificar la in